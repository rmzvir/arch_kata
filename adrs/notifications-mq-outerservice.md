# Создание системы нотификации о музыкальных событиях, использование отдельной MQ для нотификаций и использование стороннего сервиса рассылки нотификаций
## Статус
Принят
## Контекст
Требуется массовая рассылка слушателям радиостанции сообщений о статусах мероприятий и изменениях в программах мероприятий.
Разработка собственной системы рассылок мобильным клиентам требует глубокой экспертизы в мобильной разработки и 
больших технических ресурсов на эксплуатацию системы
## Решение
Для отправки нотификаций мобильным клиентам использовать сторонний сервис, способный выполнить гарантированную доставку сообщений
с учетом специфики мобильной ОС и модели устройства

Разработка 2 сервисов, ответственных за подготовку нотификаций и их отправку
- Prepare notification Service получает событие о мероприятии, собирает информацию о пользователях, для которых нужна рассылка,
   подготавливает события рассылки для каждого пользователя и отправляет сообщение в очередь MQ.
- Sender Notification Worker 
    - реализует API отправки нотификаций сторонней системы
    - считывает сообщения из очереди и кодирует в необходимые структуры данных и формат 
- Очередь MQ является буфером хранения, предотвращая потерю данных и реализует механизм BackPressure для балансировки нагрузки.
  Использование отдельной MQ вместо брокера Kafka дает гарантию сохранения работоспособности Kafka, в случае неполадок во flow нотификации
## Последствия
### Позитивные:
- Не требуется реализация системы доставки нотификации мобильным устройствам
- Вынесение высоконагруженного процесса на отдельные stateless обработчики с собственным масштабированием и реализацией BackPressure
### Негативные:
- Требуется доп. расходы на оплату доставок нотификаций
- Требуется реализация API сторонней системы
- Зависимость от доступности системы не из скоупа проекта и компании
		
